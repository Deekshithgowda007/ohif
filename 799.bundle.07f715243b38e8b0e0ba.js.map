{"version":3,"file":"799.bundle.07f715243b38e8b0e0ba.js","mappings":"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","sources":["webpack:///../../../extensions/measurement-tracking/src/viewports/TrackedCornerstoneViewport.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport OHIF, { utils } from '@ohif/core';\r\n\r\nimport { ViewportActionBar, Tooltip, Icon } from '@ohif/ui';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { annotation } from '@cornerstonejs/tools';\r\nimport { useTrackedMeasurements } from './../getContextModule';\r\nimport { BaseVolumeViewport, Enums } from '@cornerstonejs/core';\r\n\r\nconst { formatDate } = utils;\r\n\r\nfunction TrackedCornerstoneViewport(props) {\r\n  const {\r\n    displaySets,\r\n    viewportIndex,\r\n    viewportLabel,\r\n    servicesManager,\r\n    extensionManager,\r\n    viewportOptions,\r\n  } = props;\r\n\r\n  const { t } = useTranslation('Common');\r\n\r\n  const {\r\n    measurementService,\r\n    cornerstoneViewportService,\r\n    viewportGridService,\r\n  } = servicesManager.services;\r\n\r\n  // Todo: handling more than one displaySet on the same viewport\r\n  const displaySet = displaySets[0];\r\n\r\n  const [\r\n    trackedMeasurements,\r\n    sendTrackedMeasurementsEvent,\r\n  ] = useTrackedMeasurements();\r\n\r\n  const [isTracked, setIsTracked] = useState(false);\r\n  const [trackedMeasurementUID, setTrackedMeasurementUID] = useState(null);\r\n  const [viewportElem, setViewportElem] = useState(null);\r\n\r\n  const { trackedSeries } = trackedMeasurements.context;\r\n  const viewportId = viewportOptions.viewportId;\r\n\r\n  const {\r\n    SeriesDate,\r\n    SeriesDescription,\r\n    SeriesInstanceUID,\r\n    SeriesNumber,\r\n  } = displaySet;\r\n\r\n  const {\r\n    PatientID,\r\n    PatientName,\r\n    PatientSex,\r\n    PatientAge,\r\n    SliceThickness,\r\n    SpacingBetweenSlices,\r\n    StudyDate,\r\n    ManufacturerModelName,\r\n  } = displaySet.images[0];\r\n\r\n  const updateIsTracked = useCallback(() => {\r\n    const viewport = cornerstoneViewportService.getCornerstoneViewportByIndex(\r\n      viewportIndex\r\n    );\r\n\r\n    if (viewport instanceof BaseVolumeViewport) {\r\n      // A current image id will only exist for volume viewports that can have measurements tracked.\r\n      // Typically these are those volume viewports for the series of acquisition.\r\n      const currentImageId = viewport?.getCurrentImageId();\r\n\r\n      if (!currentImageId) {\r\n        if (isTracked) {\r\n          setIsTracked(false);\r\n        }\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (trackedSeries.includes(SeriesInstanceUID) !== isTracked) {\r\n      setIsTracked(!isTracked);\r\n    }\r\n  }, [isTracked, trackedMeasurements, viewportIndex, SeriesInstanceUID]);\r\n\r\n  const onElementEnabled = useCallback(\r\n    evt => {\r\n      if (evt.detail.element !== viewportElem) {\r\n        // The VOLUME_VIEWPORT_NEW_VOLUME event allows updateIsTracked to reliably fetch the image id for a volume viewport.\r\n        evt.detail.element?.addEventListener(\r\n          Enums.Events.VOLUME_VIEWPORT_NEW_VOLUME,\r\n          updateIsTracked\r\n        );\r\n        setViewportElem(evt.detail.element);\r\n      }\r\n    },\r\n    [updateIsTracked, viewportElem]\r\n  );\r\n\r\n  const onElementDisabled = useCallback(() => {\r\n    viewportElem?.removeEventListener(\r\n      Enums.Events.VOLUME_VIEWPORT_NEW_VOLUME,\r\n      updateIsTracked\r\n    );\r\n  }, [updateIsTracked, viewportElem]);\r\n\r\n  useEffect(updateIsTracked, [updateIsTracked]);\r\n\r\n  useEffect(() => {\r\n    const { unsubscribe } = cornerstoneViewportService.subscribe(\r\n      cornerstoneViewportService.EVENTS.VIEWPORT_DATA_CHANGED,\r\n      props => {\r\n        if (props.viewportIndex !== viewportIndex) {\r\n          return;\r\n        }\r\n\r\n        updateIsTracked();\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [updateIsTracked, viewportIndex]);\r\n\r\n  useEffect(() => {\r\n    if (isTracked) {\r\n      annotation.config.style.setViewportToolStyles(viewportId, {\r\n        global: {\r\n          lineDash: '',\r\n        },\r\n      });\r\n\r\n      cornerstoneViewportService\r\n        .getRenderingEngine()\r\n        .renderViewport(viewportId);\r\n\r\n      return;\r\n    }\r\n\r\n    annotation.config.style.setViewportToolStyles(viewportId, {\r\n      global: {\r\n        lineDash: '4,4',\r\n      },\r\n    });\r\n\r\n    cornerstoneViewportService.getRenderingEngine().renderViewport(viewportId);\r\n\r\n    return () => {\r\n      annotation.config.style.setViewportToolStyles(viewportId, {});\r\n    };\r\n  }, [isTracked]);\r\n\r\n  /**\r\n   * The effect for listening to measurement service measurement added events\r\n   * and in turn firing an event to update the measurement tracking state machine.\r\n   * The TrackedCornerstoneViewport is the best place for this because when\r\n   * a measurement is added, at least one TrackedCornerstoneViewport will be in\r\n   * the DOM and thus can react to the events fired.\r\n   */\r\n  useEffect(() => {\r\n    const added = measurementService.EVENTS.MEASUREMENT_ADDED;\r\n    const addedRaw = measurementService.EVENTS.RAW_MEASUREMENT_ADDED;\r\n    const subscriptions = [];\r\n\r\n    [added, addedRaw].forEach(evt => {\r\n      subscriptions.push(\r\n        measurementService.subscribe(evt, ({ source, measurement }) => {\r\n          const { activeViewportIndex } = viewportGridService.getState();\r\n\r\n          // Each TrackedCornerstoneViewport receives the MeasurementService's events.\r\n          // Only send the tracked measurements event for the active viewport to avoid\r\n          // sending it more than once.\r\n          if (viewportIndex === activeViewportIndex) {\r\n            const {\r\n              referenceStudyUID: StudyInstanceUID,\r\n              referenceSeriesUID: SeriesInstanceUID,\r\n            } = measurement;\r\n\r\n            sendTrackedMeasurementsEvent('SET_DIRTY', { SeriesInstanceUID });\r\n            sendTrackedMeasurementsEvent('TRACK_SERIES', {\r\n              viewportIndex,\r\n              StudyInstanceUID,\r\n              SeriesInstanceUID,\r\n            });\r\n          }\r\n        }).unsubscribe\r\n      );\r\n    });\r\n\r\n    return () => {\r\n      subscriptions.forEach(unsub => {\r\n        unsub();\r\n      });\r\n    };\r\n  }, [\r\n    measurementService,\r\n    sendTrackedMeasurementsEvent,\r\n    viewportIndex,\r\n    viewportGridService,\r\n  ]);\r\n\r\n  function switchMeasurement(direction) {\r\n    const newTrackedMeasurementUID = _getNextMeasurementUID(\r\n      direction,\r\n      servicesManager,\r\n      trackedMeasurementUID,\r\n      trackedMeasurements\r\n    );\r\n\r\n    if (!newTrackedMeasurementUID) {\r\n      return;\r\n    }\r\n\r\n    setTrackedMeasurementUID(newTrackedMeasurementUID);\r\n\r\n    measurementService.jumpToMeasurement(\r\n      viewportIndex,\r\n      newTrackedMeasurementUID\r\n    );\r\n  }\r\n\r\n  const getCornerstoneViewport = () => {\r\n    const { component: Component } = extensionManager.getModuleEntry(\r\n      '@ohif/extension-cornerstone.viewportModule.cornerstone'\r\n    );\r\n\r\n    return (\r\n      <Component\r\n        {...props}\r\n        onElementEnabled={onElementEnabled}\r\n        onElementDisabled={onElementDisabled}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ViewportActionBar\r\n        onDoubleClick={evt => {\r\n          evt.stopPropagation();\r\n          evt.preventDefault();\r\n        }}\r\n        useAltStyling={isTracked}\r\n        onArrowsClick={direction => switchMeasurement(direction)}\r\n        getStatusComponent={() => _getStatusComponent(isTracked)}\r\n        studyData={{\r\n          label: viewportLabel,\r\n          studyDate:\r\n            formatDate(SeriesDate) || formatDate(StudyDate) || t('NoStudyDate'),\r\n          currentSeries: SeriesNumber, // TODO - switch entire currentSeries to be UID based or actual position based\r\n          seriesDescription: SeriesDescription,\r\n          patientInformation: {\r\n            patientName: PatientName ? OHIF.utils.formatPN(PatientName) : '',\r\n            patientSex: PatientSex || '',\r\n            patientAge: PatientAge || '',\r\n            MRN: PatientID || '',\r\n            thickness: SliceThickness\r\n              ? `${parseFloat(SliceThickness).toFixed(2)}mm`\r\n              : '',\r\n            spacing:\r\n              SpacingBetweenSlices !== undefined\r\n                ? `${parseFloat(SpacingBetweenSlices).toFixed(2)}mm`\r\n                : '',\r\n            scanner: ManufacturerModelName || '',\r\n          },\r\n        }}\r\n      />\r\n      {/* TODO: Viewport interface to accept stack or layers of content like this? */}\r\n      <div className=\"relative flex flex-row w-full h-full overflow-hidden\">\r\n        {getCornerstoneViewport()}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nTrackedCornerstoneViewport.propTypes = {\r\n  displaySets: PropTypes.arrayOf(PropTypes.object.isRequired).isRequired,\r\n  viewportIndex: PropTypes.number.isRequired,\r\n  dataSource: PropTypes.object,\r\n  children: PropTypes.node,\r\n  customProps: PropTypes.object,\r\n};\r\n\r\nTrackedCornerstoneViewport.defaultProps = {\r\n  customProps: {},\r\n};\r\n\r\nfunction _getNextMeasurementUID(\r\n  direction,\r\n  servicesManager,\r\n  trackedMeasurementId,\r\n  trackedMeasurements\r\n) {\r\n  const { measurementService, viewportGridService } = servicesManager.services;\r\n  const measurements = measurementService.getMeasurements();\r\n\r\n  const { activeViewportIndex, viewports } = viewportGridService.getState();\r\n  const {\r\n    displaySetInstanceUIDs: activeViewportDisplaySetInstanceUIDs,\r\n  } = viewports[activeViewportIndex];\r\n\r\n  const { trackedSeries } = trackedMeasurements.context;\r\n\r\n  // Get the potentially trackable measurements for the series of the\r\n  // active viewport.\r\n  // The measurements to jump between are the same\r\n  // regardless if this series is tracked or not.\r\n\r\n  const filteredMeasurements = measurements.filter(\r\n    m =>\r\n      trackedSeries.includes(m.referenceSeriesUID) &&\r\n      activeViewportDisplaySetInstanceUIDs.includes(m.displaySetInstanceUID)\r\n  );\r\n\r\n  if (!filteredMeasurements.length) {\r\n    // No measurements on this series.\r\n    return;\r\n  }\r\n\r\n  const measurementCount = filteredMeasurements.length;\r\n\r\n  const uids = filteredMeasurements.map(fm => fm.uid);\r\n  let measurementIndex = uids.findIndex(uid => uid === trackedMeasurementId);\r\n\r\n  if (measurementIndex === -1) {\r\n    // Not tracking a measurement, or previous measurement now deleted, revert to 0.\r\n    measurementIndex = 0;\r\n  } else {\r\n    if (direction === 'left') {\r\n      measurementIndex--;\r\n\r\n      if (measurementIndex < 0) {\r\n        measurementIndex = measurementCount - 1;\r\n      }\r\n    } else if (direction === 'right') {\r\n      measurementIndex++;\r\n\r\n      if (measurementIndex === measurementCount) {\r\n        measurementIndex = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  const newTrackedMeasurementId = uids[measurementIndex];\r\n\r\n  return newTrackedMeasurementId;\r\n}\r\n\r\nfunction _getStatusComponent(isTracked) {\r\n  const trackedIcon = isTracked ? 'status-tracked' : 'status-untracked';\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <Tooltip\r\n        position=\"bottom-left\"\r\n        content={\r\n          <div className=\"flex py-2\">\r\n            <div className=\"flex pt-1\">\r\n              <Icon name=\"info-link\" className=\"w-4 text-primary-main\" />\r\n            </div>\r\n            <div className=\"flex ml-4\">\r\n              <span className=\"text-base text-common-light\">\r\n                {isTracked ? (\r\n                  <>\r\n                    Series is\r\n                    <span className=\"font-bold text-white\"> tracked</span> and\r\n                    can be viewed <br /> in the measurement panel\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    Measurements for\r\n                    <span className=\"font-bold text-white\"> untracked </span>\r\n                    series <br /> will not be shown in the <br /> measurements\r\n                    panel\r\n                  </>\r\n                )}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        }\r\n      >\r\n        <Icon name={trackedIcon} className=\"text-primary-light\" />\r\n      </Tooltip>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TrackedCornerstoneViewport;\r\n"],"names":["formatDate","utils","TrackedCornerstoneViewport","props","displaySets","viewportIndex","viewportLabel","servicesManager","extensionManager","viewportOptions","t","useTranslation","measurementService","cornerstoneViewportService","viewportGridService","services","displaySet","trackedMeasurements","sendTrackedMeasurementsEvent","useTrackedMeasurements","isTracked","setIsTracked","useState","trackedMeasurementUID","setTrackedMeasurementUID","viewportElem","setViewportElem","trackedSeries","context","viewportId","SeriesDate","SeriesDescription","SeriesInstanceUID","SeriesNumber","PatientID","PatientName","PatientSex","PatientAge","SliceThickness","SpacingBetweenSlices","StudyDate","ManufacturerModelName","images","updateIsTracked","useCallback","viewport","getCornerstoneViewportByIndex","BaseVolumeViewport","currentImageId","getCurrentImageId","includes","onElementEnabled","evt","detail","element","addEventListener","Enums","VOLUME_VIEWPORT_NEW_VOLUME","onElementDisabled","removeEventListener","useEffect","unsubscribe","subscribe","EVENTS","VIEWPORT_DATA_CHANGED","annotation","setViewportToolStyles","global","lineDash","getRenderingEngine","renderViewport","added","MEASUREMENT_ADDED","addedRaw","RAW_MEASUREMENT_ADDED","subscriptions","forEach","push","_ref","source","measurement","activeViewportIndex","getState","referenceStudyUID","StudyInstanceUID","referenceSeriesUID","unsub","React","ViewportActionBar","onDoubleClick","stopPropagation","preventDefault","useAltStyling","onArrowsClick","direction","newTrackedMeasurementUID","trackedMeasurementId","measurements","getMeasurements","viewports","displaySetInstanceUIDs","activeViewportDisplaySetInstanceUIDs","filteredMeasurements","filter","m","displaySetInstanceUID","length","measurementCount","uids","map","fm","uid","measurementIndex","findIndex","_getNextMeasurementUID","jumpToMeasurement","switchMeasurement","getStatusComponent","trackedIcon","className","Tooltip","position","content","Icon","name","_getStatusComponent","studyData","label","studyDate","currentSeries","seriesDescription","patientInformation","patientName","OHIF","formatPN","patientSex","patientAge","MRN","thickness","parseFloat","toFixed","spacing","undefined","scanner","getCornerstoneViewport","component","Component","getModuleEntry","_extends","propTypes","PropTypes","isRequired","dataSource","children","customProps","defaultProps"],"sourceRoot":""}